Voy a refactorizar el sistema de gestión de tareas para simplificar la asociación de tareas a entidades y automatizar la creación de grupos.

### 1. Backend (Directus - Requisito Previo)
Necesitarás añadir dos campos nuevos a la colección `tasks` en Directus para permitir la asociación directa sin depender exclusivamente del grupo:
*   `entity_type` (String): Para saber si es tarea de vuelo, hotel, etc.
*   `entity_id` (String/Integer): Para vincularla a un ítem específico.

### 2. Frontend (Nuxt)

#### A. Actualización de Tipos (`app/types/tasks.ts`)
Actualizaré la interfaz `Task` para incluir `entity_type` y `entity_id`.

#### B. Automatización de Grupos (`useTripTasks.ts`)
Implementaré una función `initializeTripTaskGroups(tripId)` que creará automáticamente los siguientes grupos si no existen:
*   **General** (para el viaje completo)
*   **Vuelos**
*   **Alojamientos**
*   **Actividades**
*   **Seguros**

Esta función se podrá llamar manualmente o integrarse en el flujo de creación de viajes.

#### C. Lógica de Negocio (`useTripTasks.ts`)
*   Modificaré `fetchTasks` para traer los nuevos campos.
*   Añadiré helpers para obtener el "Grupo por defecto" según el tipo de entidad (ej: si creo una tarea de hotel, buscará el grupo "Alojamientos").

#### D. Componente `EntityTasksWidget.vue`
Lo reescribiré para que ya no busque/cree un "grupo específico" para cada entidad. En su lugar:
1.  Filtrará las tareas globales buscando aquellas que coincidan con `entity_type` y `entity_id`.
2.  Al crear una tarea nueva, le asignará automáticamente esos metadatos y la meterá en el grupo general de su categoría (ej: Grupo "Alojamientos").

#### E. Página de Tareas (`TaskBoard.vue`)
Se mantendrá visualmente igual, pero ahora las tareas estarán mejor organizadas en grupos grandes (Categorías) en lugar de micro-grupos por cada reserva.

### Pasos de Ejecución
1.  Actualizar tipos TypeScript.
2.  Implementar la lógica de grupos por defecto en el composable.
3.  Actualizar el widget de tareas por entidad para usar el nuevo filtrado.
4.  Ajustar el modal de tareas para manejar la asignación correcta.
